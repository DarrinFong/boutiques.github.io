<html>
	<head>
		<meta charset="utf-8"><title>boutiques - documentation</title>
		<link rel="stylesheet" href="assets/css/docs.css" />
	</head>
	
	<body id="preview">
		<h1><a id="Boutiques_schema_0"></a>Boutiques schema</h1>
		<p>The JSON schema for Boutiques descriptors.</p>
		
		<h2><a id="Properties_4"></a>Properties</h2>
		<p>Mandatory properties are in bold. Note that Boutiques descriptors may contain additional, unspecified properties providing extra information about the tool. It is strongly recommended that implementations do not critically depend on unspecified properties.</p>
		<ul>
			<li><strong><code>name</code>:</strong> tool name.</li>
			<li><strong><code>description</code>:</strong> tool description.</li>
			<li><strong><code>schema-version</code>:</strong> version of the schema used.</li>
			<li><strong><code>command-line</code>:</strong> a string that describes the tool command line, where input and output values are identified by “keys”. At runtime, command-line keys are substituted with flags and values (see details in next Section). Example:</li>
		</ul>
		<pre>
			<code>
				<span class="hljs-tag">my_tool</span> <span class="hljs-attr_selector">[PARAM1]</span> <span class="hljs-attr_selector">[IN_FILE]</span> <span class="hljs-attr_selector">[PARAM2]</span> <span class="hljs-attr_selector">[OUT_FILE]</span>
			</code>
		</pre>
		<p>The format of command line keys is not specified. However, it is recommended to use easily-identifiable strings.</p>
		<ul>
			<li><strong><code>inputs</code>:</strong> an array of objects that represent inputs with the following properties:
				<ul>
					<li><strong><code>id</code>:</strong> a short, unique, informative identifier containing only alphanumeric characters and underscores. Typically used to generate variable names. Example: “data_file”.</li>
					<li><strong><code>name</code>:</strong> a human-readable input name. Example: “Data File”.</li>
					<li><strong><code>type</code>:</strong> input type. “File”, “String”, “Flag”, or “Number”.</li>
					<li><code>description</code>: input description.</li>
					<li><code>command-line-key</code>: a string, contained in <code>command-line</code>, substituted by the input value and/or flag at runtime.</li>
					<li><code>list</code>: a boolean, true if input is a list of value. An input of type “Flag” may not be a list.</li>
					<li><code>optional</code>: a boolean, true if input is optional.</li>
					<li><code>command-line-flag</code>: a string involved in the <code>command-line-key</code> substitution. Inputs of type “Flag” have to have a command-line flag. Examples: <code>-v</code>, <code>--force</code>.</li>
					<li><code>default-value</code>: default value used by the tool when the input is not specified.</li>
					<li><code>required-inputs</code>: ids of the inputs which must be present for this input to be available.</li>
					<li><code>disabled-by-inputs</code>: ids of the inputs that disable this input when they are present.</li>
				</ul>
			</li>
			<li><strong><code>output-files</code></strong>: an array of objects that represent output files with the following properties:
				<ul>
					<li><strong><code>id</code>:</strong> a short, unique, informative identifier containing only alphanumeric characters and underscores. Typically used to generate variable names. Example: “data_file”.</li>
					<li><strong><code>name</code></strong>: output name.</li>
					<li><code>description</code>: output description.</li>
					<li><strong><code>path-template</code></strong>: a string that describes the output file path relatively to the execution directory. May contain input <code>command-line-keys</code>. Example: <code>results/[INPUT1]_brain.mnc</code>.</li>
					<li><code>path-template-stripped-extensions</code>: list of file extensions that will be stripped from the input values before being substituted in the path template. Example: <code>[&quot;.nii&quot;,&quot;.nii.gz&quot;]</code>.</li>
					<li><code>command-line-key</code>: a string, contained in <code>command-line</code>, substituted by the output value/flag at runtime.</li>
					<li><code>list</code>: a boolean, true if output is a list of value. In this case, <code>path-template</code> must contain a ‘*’ standing for any string of characters (as the Linux wildcard).</li>
					<li><code>optional</code>: a boolean, true if output may not be produced by the tool.</li>
					<li><code>command-line-flag</code>: option flag of the output, involved in the <code>command-line-key</code> substitution. Examples: <code>-o</code>, <code>--output</code>.</li>
				</ul>
			</li>
			<li><code>tool-version</code>: tool version.</li>
			<li><code>docker-image</code>: name of a Docker image where tool is installed and configured. Example: <code>docker.io/neurodebian</code>.</li>
			<li><code>docker-index</code>: Docker index where Docker image is available. Example: <code>http://index.docker.io</code>.</li>
		</ul>

		<h2><a id="Commandline_substitution_42"></a>Command-line substitution</h2>
		<p>At runtime, a <strong>value</strong> is assigned to each input in <code>inputs</code>.</p>
		<ul>
			<li>Inputs of type “String” may contain any string (encoding is not specified).</li>
			<li>Inputs of type “Number” must contain a string representing a number.</li>
			<li>Inputs of type “File” must contain a string representing a file path (absolute or relative to the execution directory).</li>
			<li>Inputs of type “Flag” must contain a boolean.</li>
		</ul>
		<p>When input is a list, <strong>value</strong> contains the concatenation of all strings in the list, separated by spaces. Spaces included in list elements must be escaped by ‘’, or the elements must be single-quoted (Linux conventions).  An input of type “Flag” may not be a list.</p>
		<p>The tool command line is generated as follows:</p>
		<ol>
			<li>For each input in <code>inputs</code>, where input has a <code>command-line-key</code> and input has <strong>value</strong>:</li>
		</ol>
		<ul>
			<li>In <code>command-line</code>, replace input <code>command-line-key</code> by:
* <code>command-line-flag</code> if input is of type “Flag”.
* <code>command-line-flag</code> <strong>value</strong> (space-separated) otherwise.</li>
			<li>For each output in <code>output-files</code>
* If <code>path-template</code> contains input <code>command-line-key</code>, replace <code>command-line-key</code> by <strong>value</strong>, having previously removed the last occurrence of character ‘.’ and subsequent characters from <strong>value</strong> when input is of type “File”.</li>
		</ul>
		<ol start="2">
			<li>For each output in <code>output-files</code>, where output has a <code>command-line-key</code>:</li>
		</ol>
		<ul>
			<li>In <code>command-line</code>, replace output <code>command-line-key</code> by:
* <code>command-line-flag</code> <code>path-template</code> (space-separated). At this step, input <code>command-line-key</code>s contained in <code>path-template</code> are already substituted.</li>
		</ul>

		<h2><a id="Examples_TODO_65"></a>Examples (TODO)</h2>
		<ul>
			<li>Inputs without command-line key.</li>
			<li>Outputs without command-line key.</li>
			<li>List outputs with a command-line key. Command-line will contain a ‘*’.</li>
			<li>List outputs without a command-line key.</li>
		</ul>

	</body>
</html>